{"version":3,"file":"index.js","sources":["../../src/lib/directives/xy-keep-top.js","../../src/lib/directives/xy-moving-btn.js","../../src/lib/directives/xy-hover-btn.js","../../src/lib/directives/xy-pull-refresh.js","../../src/lib/components/xy-pop-image.vue","../../src/lib/directives/xy-pop-image.js","../../src/lib/plugins/xy-lazyload-resize.js","../../src/lib/components/xy-article.vue","../../src/lib/components/xy-reach-bottom.vue","../../src/lib/components/xy-scale-slider.vue","../../src/lib/components/xy-list-status.vue","../../src/lib/components/xy-time-count.vue","../../src/lib/prototypes/xy-date-format.js","../../src/lib/prototypes/xy-number.js","../../src/lib/prototypes/xy-validate.js","../../src/lib/prototypes/xy-tools.js","../../src/lib/index.js"],"sourcesContent":["let scrolly = 0\nlet position = 'unset'\nlet top = 0\nlet left = 0\nlet width = 0\nlet zindex = 0\nlet boxshadow = 'none'\nlet height = 0\nlet scrolly2 = 0\nlet checkTimer = null\nlet checkCount = 0\nlet stop = false\n\nfunction resetCheck (el) {\n  if (window.scrollY <= scrolly2 || (window.scrollY <= 1 && window.scrollY <= scrolly)) {\n    stop = true\n    setTimeout(function () {\n      stop = false\n    }, 300)\n    el.style.position = position\n    el.style.top = top\n    el.style.left = left\n    el.style.width = width\n    el.style.zIndex = zindex\n    el.style.boxShadow = boxshadow\n    // el.classList.remove('xy-keep-top--ing')\n    el.removeAttribute('xy-keep-top--ing')\n    if (el.nextElementSibling) {\n      el.nextElementSibling.style.marginTop = 0\n    }\n    clearInterval(checkTimer)\n    checkTimer = null\n  } else {\n    if (checkCount > 5) {\n      clearInterval(checkTimer)\n      checkTimer = null\n    }\n  }\n}\n\nfunction scroll (el) {\n  if (!stop) {\n    if (el.hasAttribute('xy-keep-top--ing')) {\n      resetCheck(el)\n    } else if (el.getBoundingClientRect().top <= 0 && !el.hasAttribute('xy-keep-top--ing')) {\n      position = el.style.position\n      top = el.style.top\n      left = el.style.left\n      width = el.style.width\n      zindex = el.style.zIndex\n      boxshadow = el.style.boxShadow\n      scrolly2 = window.scrollY\n      el.style.position = 'fixed'\n      el.style.top = '0'\n      el.style.left = '0'\n      el.style.width = '100%'\n      el.style.zIndex = '100'\n      el.style.boxShadow = '0 1px 10px rgba(0,0,0,.1)'\n      // el.classList.add('xy-keep-top--ing')\n      el.setAttribute('xy-keep-top--ing', '')\n      if (el.nextElementSibling) {\n        el.nextElementSibling.style.marginTop = `${height}px`\n      }\n      scrolly = window.scrollY\n\n      checkCount = 0\n      checkTimer = setInterval(function () {\n        console.log(checkCount)\n        checkCount++\n        resetCheck(el)\n      }, 200)\n    }\n  }\n}\n\nlet scrollCb = function () {\n  console.warn('no scroll callback function')\n}\n\nexport default {\n  name: 'xy-keep-top',\n  bind: function (el) {\n    // el.classList.add('xy-keep-top')\n    el.setAttribute('xy-keep-top', '')\n    scrollCb = scroll.bind({}, el)\n    window.addEventListener('scroll', scrollCb)\n  },\n  inserted: function (el) {\n    height = el.offsetHeight\n  },\n  unbind: function () {\n    window.removeEventListener('scroll', scrollCb)\n  }\n}","let timer = null\n\nfunction btnClick (el) {\n  el.setAttribute('xy-moving-btn--moving', '')\n  if (timer) {\n    clearTimeout(timer)\n    timer = null\n  }\n  timer = setTimeout(function () {\n    el.removeAttribute('xy-moving-btn--moving')\n  }, 300)\n}\n\nlet btnClickCb = function () {\n  console.warn('no moving btn callback function')\n}\n\nexport default {\n  name: 'xy-moving-btn',\n  bind: function (el) {\n    el.setAttribute('xy-moving-btn', '')\n    btnClickCb = btnClick.bind({}, el)\n    el.addEventListener('click', btnClickCb)\n  },\n  unbind: function (el) {\n    el.removeEventListener('click', btnClickCb)\n  }\n}","let timer = null\n\nfunction btnClick (el) {\n  el.setAttribute('xy-hover-btn--moving', '')\n  if (timer) {\n    clearTimeout(timer)\n    timer = null\n  }\n  timer = setTimeout(function () {\n    el.removeAttribute('xy-hover-btn--moving')\n  }, 300)\n}\n\nlet btnClickCb = function () {\n  console.warn('no moving btn callback function')\n}\n\nexport default {\n  name: 'xy-hover-btn',\n  bind: function (el) {\n    el.setAttribute('xy-hover-btn', '')\n    btnClickCb = btnClick.bind({}, el)\n    el.addEventListener('click', btnClickCb)\n  },\n  unbind: function (el) {\n    el.removeEventListener('click', btnClickCb)\n  }\n}","// 触发刷新\nfunction pullRefresh (cb, el) {\n  log('刷新触发')\n  cb.call({}, function stop () {\n    // 结束刷新反馈\n    eh = 0\n    height = 0\n    move()\n    loader.style.height = height\n  })\n}\n\nfunction touchstart (el, {touches: [touch]}) {\n  el.classList.add('xy-pull-refresh')\n  let {clientY: y} = touch\n  sy = Math.round(y)\n  my = sy\n  direct = ''\n  upLock = false\n  downLock = false\n  stLock = true\n  log(`start->direct:${direct},sy:${sy},my:${my},st:${st},height:${height}`)\n}\n\nfunction touchmove (el, e) {\n  let {touches: [touch]} = e\n  let {clientY: y} = touch\n  my = Math.round(y)\n\n  // 判断滑动方向\n  if (sy > my) {\n    direct = 'up'\n  } else if (sy < my) {\n    direct = 'down'\n  } else {\n    direct = ''\n  }\n\n  // 预滑动宽度\n  let heightTemp = my - sy + eh\n  // 滚动必须为0, 且\"下拉\"开启\n  if (st === 0 && stLock) {\n    // 控制宽度\n    if (heightTemp < 0) {\n      heightTemp = 0\n    } else if (heightTemp > pullHeight) {\n      heightTemp = pullHeight\n    }\n  } else {\n    heightTemp = 0\n  }\n  log(`move->direct:${direct},sy:${sy},my:${my},st:${st},height:${height},heightTemp:${heightTemp}`)\n  // 下拉方向\n  if (direct === 'down') {\n    // 上划锁, 停止下拉\n    height = upLock ? 0 : heightTemp\n    // 滚动为0的时候, 防止微信内置浏览器自带下拉傻逼信息展示\n    if (st === 0) {\n      e.preventDefault()\n    }\n    // 下滑锁开启\n    downLock = true\n  } else if (direct === 'up') {\n    // 上划锁, 停止下拉\n    height = downLock ? 0 : heightTemp\n    // 上滑锁开启\n    upLock = true\n  }\n  loader.style.height = `${height}px`\n}\n\nfunction touchend (el, {changedTouches: [touch]}) {\n  let {clientY: y} = touch\n  sy = Math.round(y)\n  my = sy\n  log(`end->direct:${direct},sy:${sy},my:${my},st:${st},height:${height}`)\n  // 滑动结束, 根据最低宽度自动收缩/扩宽\n  if (height > pullPoint) {\n    height = pullHeight\n    pullRefreshCb()\n  } else {\n    height = 0\n  }\n  eh = height\n  direct = ''\n  move()\n  loader.style.height = `${height}px`\n}\n\n// window scroll event\nfunction onWinScroll () {\n  st = window.scrollY\n  // 下拉关闭\n  if (st > 0) {\n    stLock = false\n  }\n  // 判断滑动方向\n  if (st > sb) {\n    direct = 'up'\n  } else if (st < sb) {\n    direct = 'down'\n  } else {\n    direct = ''\n  }\n  sb = st\n  log(`scroll->direct:${direct},sy:${sy},my:${my},st:${st}`)\n}\n\n// 启动自动动画\nfunction move () {\n  loader.classList.add('xy-pull-refresh__bar--auto')\n  clearTimeout(timer)\n  timer = setTimeout(function () {\n    loader.classList.remove('xy-pull-refresh__bar--auto')\n  }, 300)\n}\n\n// 加载板\nlet loader = document.createElement('div')\n\n// 日志板\nlet logger = document.createElement('div')\nlogger.style.position = 'fixed'\nlogger.style.zIndex = '100'\nlogger.style.bottom = 0\nlogger.style.left = 0\nlogger.style.width = '100%'\nlogger.style.backgroundColor = 'rgba(0,0,0,0.6)'\nlogger.style.fontSize = '14px'\nlogger.style.color = '#fff'\nlogger.style.minHeight = '16px'\nlogger.style.maxHeight = '160px'\nlogger.style.lineHeight = '16px'\nlogger.style.padding = '0 5px'\nlogger.style.overflow = 'auto'\nlogger.addEventListener('touchstart', function (e) {\n  e.stopPropagation()\n}, true)\nlogger.addEventListener('touchmove', function (e) {\n  e.stopPropagation()\n}, true)\nlogger.addEventListener('touchend', function (e) {\n  e.stopPropagation()\n}, true)\nlogger.innerHTML = ''\n\n// 打日志\nfunction log (str) {\n  // console.log(str)\n  // logger.innerHTML = logger.innerHTML + (logger.innerHTML ? '<br>' : '') + str\n  // logger.scrollTop = logger.scrollHeight\n}\n\n// 动画计时器\nlet timer = null\n\n// 下拉宽度\nlet pullHeight = 70\n\n// 最小下拉宽度\nlet pullPoint = 60\n\n// 上一次下拉宽度\nlet eh = 0\n\n// 当前下拉宽度\nlet height = 0\n\n// touch start y\nlet sy = 0\n\n// touch move y\nlet my = 0\n\n// scroll y\nlet st = 0\n\n// 上一次 scroll y\nlet sb = 0\n\n// 当前滚动方向\nlet direct = ''\n\n// 上划锁\nlet upLock = false\n\n// 下滑锁\nlet downLock = false\n\n// 非下拉滑动锁\nlet stLock = true\n\nlet pullRefreshCb = function () {\n  console.warn('no pull refresh callback function')\n}\n\nlet touchstartCb = function () {\n  console.warn('no pull refresh touchstart function')\n}\n\nlet touchmoveCb = function () {\n  console.warn('no pull refresh touchmove function')\n}\n\nlet touchendCb = function () {\n  console.warn('no pull refresh touchend function')\n}\n\nlet onWinScrollCb = function () {\n  console.warn('no scroll function')\n}\n\nexport default {\n  name: 'xy-pull-refresh',\n  bind: function (el, {value, arg}) {\n    // 对外\n    if (value) {\n      pullRefreshCb = pullRefresh.bind({}, value, el)\n    }\n    el.classList.add('xy-pull-refresh')\n    loader.style.height = '0'\n    loader.classList.add('xy-pull-refresh__bar')\n    loader.innerHTML = '<span></span><span></span><span></span>'\n    el.insertBefore(loader, el.children[0])\n    touchstartCb = touchstart.bind({}, el)\n    touchmoveCb = touchmove.bind({}, el)\n    touchendCb = touchend.bind({}, el)\n    onWinScrollCb = onWinScroll.bind({}, el)\n    el.addEventListener('touchstart', touchstartCb)\n    el.addEventListener('touchmove', touchmoveCb)\n    el.addEventListener('touchend', touchendCb)\n    window.addEventListener('scroll', onWinScrollCb)\n  },\n  unbind: function (el) {\n    // 解绑所有事件\n    el.removeEventListener('touchstart', touchstartCb)\n    el.removeEventListener('touchmove', touchmoveCb)\n    el.removeEventListener('touchend', touchendCb)\n    window.removeEventListener('scroll', onWinScrollCb)\n  }\n}","<template>\n  <div class=\"blk-pop-image\"\n       v-show=\"visible\"\n       @touchstart.stop\n       @touchmove.stop>\n    <div class=\"blk-pop-image-bg\"></div>\n    <img class=\"blk-pop-image-img\"\n         :class=\"{done:done}\"\n         :src=\"img\"\n         @load=\"onLoad\"\n         ref=\"img\"\n         :style=\"{opacity:loading?0:1,visibility:loading?'hidden':'visible',top:`${top}px`,left:`${left}px`,width:`${width}px`,height:`${height<=0?'auto':(height+'px')}`}\"\n         @touchstart.prevent=\"onTouchstart\"\n         @touchmove.prevent=\"onTouchmove\"\n         @touchend.prevent=\"onTouchend\">\n    <div class=\"blk-pop-image-close\"\n         @click.stop=\"onClose\"><span></span><span></span><span></span><span></span></div>\n    <div class=\"blk-pop-image-loading\"\n         v-show=\"loading\"></div>\n  </div>\n</template>\n\n<script>\n  //更新坐标值\n  function setPoints (map, points) {\n    map.value = []\n    for (var i = 0; i < points.length; i++) {\n      map.value.push({\n        id: points[i].identifier,\n        x: parseInt(points[i].clientX),\n        y: parseInt(points[i].clientY)\n      })\n    }\n  }\n\n  //删除坐标\n  function deletePoint (map, point, state) {\n    for (var i = 0; i < map.value.length; i++) {\n      if (map.value[i].id === point.identifier) {\n        map.value.splice(i, 1)\n        break\n      }\n    }\n  }\n\n  //复制坐标值\n  function copyPoint (target, source) {\n    for (var i = 0; i < target.value.length; i++) {\n      for (var j = 0; j < source.value.length; j++) {\n        if (target.value[i].id === source.value[j].id) {\n          target.value[i].x = source.value[j].x\n          target.value[i].y = source.value[j].y\n        }\n      }\n    }\n  }\n\n  //判断是否在区域内\n  function isInside (x, y, cx, cy, w, h) {\n    if (x < cx || x > cx + w) {\n      return false\n    }\n    else if (y < cy || y > cy + h) {\n      return false\n    }\n    return true\n  }\n\n  /**\n   * 缓动工具\n   */\n  var moveTool = (function () {\n    //缓动公式\n    var moveFn = {\n      Linear: function (t, b, c, d) {\n        return c * t / d + b\n      },\n      CircularEaseInOut: function (t, b, c, d) {\n        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b\n        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b\n      },\n      CubicEaseOut: function (t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t + 1) + b\n      },\n      QuartEaseOut: function (t, b, c, d) {\n        return -c * ((t = t / d - 1) * t * t * t - 1) + b\n      },\n      ExpoEaseOut: function (t, b, c, d) {\n        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b\n      }\n    }\n\n    //毫秒\n    var rate = 1000\n    var time = 10\n\n    /**\n     * 缓动方法\n     * @param before 前值\n     * @param after 后值\n     * @param callback 每帧回调\n     * @param finish 完成回调\n     * @param r 动画时长(可选)\n     * @param fn 缓动公式(可选)\n     */\n    function move (before, after, callback, finish, r, fn) {\n      var i    = 0,\n          itv  = null,\n          func = null\n      if (!r) {\n        r = rate\n      }\n      if (!fn) {\n        func = moveFn.CircularEaseInOut\n      }\n      else {\n        func = moveFn[fn]\n      }\n      itv = setInterval(function () {\n        var s = r * time / 100\n        var n = func(i, before, after - before, s)\n        if (typeof (callback) == 'function') {\n          callback.call(null, n)\n        }\n        if (i >= s) {\n          clearInterval(itv)\n          itv = null\n          if (typeof (finish) == 'function') {\n            finish.call()\n          }\n        }\n        else {\n          i++\n        }\n      }, time)\n      return itv\n    }\n\n    /**\n     * 缓动方法(多次)\n     * @param list 数值变化数组,如[0,100,300...]即值从0到100,然后从100到300...\n     * @param callback 每帧回调\n     * @param finish 完成回调\n     * @param r 动画时长(可选)\n     * @param fn 缓动公式(可选)\n     */\n    function moveSq (list, callback, finish, r, fn) {\n      if (list.length > 1) {\n        moveDeep(list, callback, finish, r, 0, list.length, fn)\n      }\n      else {\n        if (typeof (finish) == 'function') {\n          finish.call()\n        }\n      }\n    }\n\n    //moveSq的递归方法\n    function moveDeep (list, callback, finish, r, index, length, fn) {\n      move(list[index], list[index + 1], function (val) {\n        callback.call(null, val, index)\n      }, function () {\n        if (index < length - 2) {\n          moveDeep(list, callback, finish, r, index + 1, length, fn)\n        }\n        else {\n          if (typeof (finish) == 'function') {\n            finish.call()\n          }\n        }\n      }, r, fn)\n    }\n\n    return {\n      move: move,\n      moveSq: moveSq\n    }\n  })()\n\n  //动画定时器\n  let inter = {\n    x: null,\n    y: null\n  }\n\n  let interX = []\n  let interY = []\n\n  function clearIntervals (array) {\n    array.forEach(function (item, index) {\n      clearInterval(item)\n    })\n  }\n\n  export default {\n    name: 'xy-pop-image',\n    data () {\n      return {\n        visible: false,\n        img: '',\n        imgs: [],\n        index: 0,\n        loading: true,\n        done: false,\n\n        top: 0,\n        left: 0,\n        width: window.innerWidth,\n        height: 0,\n\n        opts: {\n          moveLimit: 50,\n          onLoad: function () {\n\n          },\n          //          onNext: function () {\n          //\n          //          },\n          //          onPre: function () {\n          //\n          //          }\n        },\n        //图片节点样式状态\n        imgState: {\n          start: {\n            top: 0,\n            left: 0,\n            width: 0,\n            height: 0\n          },\n          end: {\n            top: 0,\n            left: 0,\n            width: 0,\n            height: 0\n          }\n        },\n        //滑动速度\n        speed: {\n          x: 0,\n          y: 0\n        },\n        //触摸开始坐标\n        starts: {value: []},\n        //触摸移动坐标\n        moves: {value: []},\n        //对角线长\n        len: {\n          start: 0,\n          move: 0\n        },\n        //缩放比例\n        rate: 1,\n        //触摸开始x轴两点的中点\n        cenX: {\n          start: 0,\n          move: 0\n        },\n        //触摸开始y轴两点的中点\n        cenY: {\n          start: 0,\n          move: 0\n        },\n        ww: window.innerWidth,\n        wh: window.innerHeight,\n        oh: 0,\n        ow: 0,\n        clickTime: null\n      }\n    },\n    methods: {\n      //      setImg (img) {\n      //        let that = this\n      //        that.img = img\n      //        that.loading = true\n      //      },\n      onClose () {\n        let that = this\n        that.visible = false\n        //        debugger\n      },\n      onLoad () {\n        let that = this\n        that.reset()\n        that.$nextTick(function () {\n          that.popup()\n        })\n      },\n      onTouchstart (e) {\n        let that = this\n        //停止动画\n        clearIntervals(interX)\n        clearIntervals(interY)\n\n        that.speed.x = 0\n        that.speed.y = 0\n        // if (!interX && !interY) {\n        //记录上一帧触摸开始坐标\n        var tx = 0\n        var ty = 0\n        var preCount = that.starts.value.length\n        if (preCount > 0) {\n          tx = that.starts.value[0].x\n          ty = that.starts.value[0].y\n        }\n        //刷新触摸开始坐标\n        setPoints(that.starts, e.touches)\n\n        //情况: 先击非图片区域, 后点点击图片区域, 然后缩放滑动1\n        if (!isInside(e.touches[0].clientX, e.touches[0].clientY, that.imgState.start.left, that.imgState.start.top, that.imgState.start.width, that.imgState.start.height)) {\n          deletePoint(that.starts, e.touches[0])\n        }\n        //如果双点触摸\n        if (that.starts.value.length > 1) {\n          //情况: 先击非图片区域, 后点点击图片区域, 然后缩放滑动2\n          if (!isInside(e.touches[1].clientX, e.touches[1].clientY, that.imgState.start.left, that.imgState.start.top, that.imgState.start.width, that.imgState.start.height)) {\n            deletePoint(that.starts, e.touches[1])\n          }\n\n          that.len.start = Math.sqrt(Math.pow(that.starts.value[0].x - that.starts.value[1].x, 2) + Math.pow(that.starts.value[0].y - that.starts.value[1].y, 2))\n\n          var tempCenX = (that.starts.value[0].x + that.starts.value[1].x) / 2\n          var tempCenY = (that.starts.value[0].y + that.starts.value[1].y) / 2\n\n          if (preCount == 0) {\n            //突然出现两个触摸点的时候\n            that.cenX.start = tempCenX\n            that.cenY.start = tempCenY\n          }\n          else {\n            //虚构补充单点触摸时的假两点的中点(关键2)\n            //新中点 - 旧中点(虚构补充)\n            that.cenX.start = tempCenX - (that.starts.value[0].x - tx)\n            that.cenY.start = tempCenY - (that.starts.value[0].y - ty)\n          }\n        } else {\n          let oldClickTime = that.clickTime\n          that.clickTime = (new Date()).getTime()\n          if (oldClickTime) {\n            if (that.clickTime - oldClickTime < 200) {\n              console.log('双击')\n              that.reset()\n              that.$nextTick(function () {\n                that.popup()\n              })\n              that.clickTime = null\n            }\n          }\n        }\n        // }\n      },\n      onTouchmove (e) {\n        let that = this\n        //        debugger\n        // if (!interX && !interY) {\n        //刷新触摸移动坐标\n        setPoints(that.moves, e.touches)\n        //删除不在图片区域的触摸点坐标(不产生start, 却产生了move的触摸点)\n        //情况: 先点击图片区域, 后点击非图片区域, 然后缩放滑动\n        for (var i = 0; i < e.touches.length; i++) {\n          //排除超出显示区域的触摸\n          if (e.touches[i].clientX <= 0 + that.opts.moveLimit\n            || e.touches[i].clientX >= that.ww - that.opts.moveLimit\n            || e.touches[i].clientY <= 0 + that.opts.moveLimit\n            || e.touches[i].clientY >= that.wh - that.opts.moveLimit) {\n            return\n          }\n\n          var has = false\n          for (var j = 0; j < that.starts.value.length; j++) {\n            if (that.starts.value[j].id == e.touches[i].identifier) {\n              has = true\n              break\n            }\n          }\n          if (!has) {\n            deletePoint(that.moves, e.touches[i])\n          }\n        }\n        if (that.moves.value.length > 1) {\n          //如果双点触摸\n          that.len.move = Math.sqrt(Math.pow(that.moves.value[0].x - that.moves.value[1].x, 2) + Math.pow(that.moves.value[0].y - that.moves.value[1].y, 2))\n          //根据对角线长度变化计算缩放比例\n          that.rate = (that.len.move / that.len.start).toFixed(2)\n          //双点触摸两点的中点坐标\n          that.cenX.move = (that.moves.value[0].x + that.moves.value[1].x) / 2\n          that.cenY.move = (that.moves.value[0].y + that.moves.value[1].y) / 2\n          //新宽高\n          var tmp_w = that.imgState.start.width * that.rate\n          var tmp_h = that.imgState.start.height * that.rate\n          //限制缩放大小\n          if (tmp_w <= that.ww && tmp_h <= that.wh) {\n            tmp_w = that.imgState.start.width\n            tmp_h = that.imgState.start.height\n            //判断不准确,需要修改\n            if (that.ww - tmp_w > that.wh - tmp_h) {\n              tmp_w = that.ow / oh * that.wh\n              tmp_h = that.wh\n              that.imgState.end.top = 0\n              that.imgState.end.left = (that.ww - tmp_w) / 2\n            } else if (that.ww - tmp_w < that.wh - tmp_h) {\n              tmp_w = that.ww\n              tmp_h = oh / that.ow * that.ww\n              that.imgState.end.top = (that.wh - tmp_h) / 2\n              that.imgState.end.left = 0\n            }\n          } else {\n            //图片缩放后的顶点坐标(关键1)\n            //l2   cx - x2   cy - y2\n            //-- = ------- = -------\n            //l1   cx - x1   cy - y1\n            //分别求 x2,y2\n            that.imgState.end.top = (that.cenY.move - that.len.move / that.len.start * (that.cenY.move - that.imgState.start.top)) + (that.cenY.move - that.cenY.start) * that.rate\n            that.imgState.end.left = (that.cenX.move - that.len.move / that.len.start * (that.cenX.move - that.imgState.start.left)) + (that.cenX.move - that.cenX.start) * that.rate\n          }\n          //图片缩放尺寸\n          that.imgState.end.width = tmp_w\n          that.imgState.end.height = tmp_h\n          that.speed.x = (that.cenX.move - that.cenX.start) * that.rate\n          that.speed.y = (that.cenY.move - that.cenY.start) * that.rate\n        }\n        else {\n          //如果单点点触摸\n          //图片顶点坐标\n          that.imgState.end.top = that.imgState.start.top + (that.moves.value[0].y - that.starts.value[0].y)\n          that.imgState.end.left = that.imgState.start.left + (that.moves.value[0].x - that.starts.value[0].x)\n\n          that.speed.x = that.moves.value[0].x - that.starts.value[0].x\n          that.speed.y = that.moves.value[0].y - that.starts.value[0].y\n        }\n        //        debugger\n        //更新图片样式\n        that.top = that.imgState.end.top\n        that.left = that.imgState.end.left\n        that.width = that.imgState.end.width\n        that.height = that.imgState.end.height\n        // }\n      },\n      onTouchend (e) {\n        let that = this\n        // if (!interX && !interY) {\n        //删除已离开触摸点坐标\n        for (var i = 0; i < e.changedTouches.length; i++) {\n          deletePoint(that.starts, e.changedTouches[i])\n          deletePoint(that.moves, e.changedTouches[i])\n        }\n\n        //更新尚在的触摸点坐标\n        copyPoint(that.starts, that.moves)\n        //更新图片样式值\n        that.imgState.start.top = that.imgState.end.top\n        that.imgState.start.left = that.imgState.end.left\n        that.imgState.start.width = that.imgState.end.width\n        that.imgState.start.height = that.imgState.end.height\n\n        //临时位置动画逻辑\n        if (that.imgState.start.width <= that.ww && that.imgState.start.height <= that.wh) {\n          if (that.imgState.start.width === that.ww) {\n            interX.push(moveTool.move(that.imgState.start.left, 0, function (v) {\n              that.left = v\n            }, function () {\n              that.imgState.start.left = 0\n              that.imgState.end.left = that.imgState.start.left\n            }, 300, 'CubicEaseOut'))\n            interY.push(moveTool.move(that.imgState.start.top, (that.wh - that.imgState.start.height) / 2, function (v) {\n              that.top = v\n            }, function () {\n              that.imgState.start.top = (that.wh - that.imgState.start.height) / 2\n              that.imgState.end.top = that.imgState.start.top\n            }, 300, 'CubicEaseOut'))\n          } else if (that.imgState.start.height === that.wh) {\n            interX.push(moveTool.move(that.imgState.start.left, (that.ww - that.imgState.start.width) / 2, function (v) {\n              that.left = v\n            }, function () {\n              that.imgState.start.left = (that.ww - that.imgState.start.width) / 2\n              that.imgState.end.left = that.imgState.start.left\n            }, 300, 'CubicEaseOut'))\n            interY.push(moveTool.move(that.imgState.start.top, 0, function (v) {\n              that.top = v\n            }, function () {\n              that.imgState.start.top = 0\n              that.imgState.end.top = that.imgState.start.top\n            }, 300, 'CubicEaseOut'))\n          }\n        }\n\n        var moveLeft = that.ww - that.imgState.start.width\n        if (that.imgState.start.width >= that.ww) {\n          if (that.imgState.start.left < moveLeft) {\n            interX.push(moveTool.move(that.imgState.start.left, moveLeft, function (v) {\n              that.left = v\n            }, function () {\n              that.imgState.start.left = moveLeft\n              that.imgState.end.left = that.imgState.start.left\n            }, 200, 'CubicEaseOut'))\n          } else if (that.imgState.start.left > 0) {\n            interX.push(moveTool.move(that.imgState.start.left, 0, function (v) {\n              that.left = v\n            }, function () {\n              that.imgState.start.left = 0\n              that.imgState.end.left = that.imgState.start.left\n            }, 200, 'CubicEaseOut'))\n          }\n\n          if (that.imgState.start.height < that.wh) {\n            var moveTop = (that.wh - that.imgState.start.height) / 2\n            interY.push(moveTool.move(that.imgState.start.top, moveTop, function (v) {\n              that.top = v\n            }, function () {\n              that.imgState.start.top = moveTop\n              that.imgState.end.top = that.imgState.start.top\n            }, 200, 'CubicEaseOut'))\n          }\n        } else {\n          moveLeft = (that.ww - that.imgState.start.width) / 2\n          interX.push(moveTool.move(that.imgState.start.left, moveLeft, function (v) {\n            that.left = v\n          }, function () {\n            that.imgState.start.left = moveLeft\n            that.imgState.end.left = that.imgState.start.left\n          }, 200, 'CubicEaseOut'))\n        }\n\n        if (that.imgState.start.height > that.wh) {\n          var moveTop = that.wh - that.imgState.start.height\n          if (that.imgState.start.top < moveTop) {\n            interY.push(moveTool.move(that.imgState.start.top, moveTop, function (v) {\n              that.top = v\n            }, function () {\n              that.imgState.start.top = moveTop\n              that.imgState.end.top = that.imgState.start.top\n            }, 200, 'CubicEaseOut'))\n          } else if (that.imgState.start.top > 0) {\n            interY.push(moveTool.move(that.imgState.start.top, 0, function (v) {\n              that.top = v\n            }, function () {\n              that.imgState.start.top = 0\n              that.imgState.end.top = that.imgState.start.top\n            }, 200, 'CubicEaseOut'))\n          }\n        } else if (moveLeft === 0 && that.imgState.start.height < that.wh) {\n          var moveTop = (that.wh - that.imgState.start.height) / 2\n          interY.push(moveTool.move(that.imgState.start.top, moveTop, function (v) {\n            //            debugger\n            that.top = v\n          }, function () {\n            that.imgState.start.top = moveTop\n            that.imgState.end.top = that.imgState.start.top\n          }, 200, 'CubicEaseOut'))\n        }\n\n        let data = {\n          index: that.index,\n          get img () {\n            return that.img\n          },\n          set img (v) {\n            that.loading = true\n            that.done = false\n            that.img = v\n          }\n        }\n\n        //临时切换事件\n        if (that.imgState.start.width >= that.ww) {\n          if (that.imgState.start.left > that.ww / 3) {\n            that.$emit('on-change', 'pre', data)\n          } else if (that.imgState.start.left < -(that.imgState.start.width - that.ww) - that.ww / 3) {\n            that.$emit('on-change', 'next', data)\n          }\n        } else {\n          if (that.imgState.start.left > that.ww / 3 + (that.ww - that.imgState.start.width) / 2) {\n            that.$emit('on-change', 'pre', data)\n          } else if (that.imgState.start.left < (that.ww - that.imgState.start.width) / 2 - that.ww / 3) {\n            that.$emit('on-change', 'next', data)\n          }\n        }\n\n        //考虑可以动画移动top/left\n        // moveTool.move(that.imgState.start.top, that.imgState.end.top, function (v) {\n        //     that.top = v;\n        // }, function () {\n        //\n        // }, 300, 'CubicEaseOut');\n        // moveTool.move(that.imgState.start.top, that.imgState.end.left, function (v) {\n        //     that.left = v;\n        // }, function () {\n        //\n        // }, 300, 'CubicEaseOut');\n        // moveTool.move(that.imgState.start.top, that.imgState.end.top, function (v) {\n        //     that.width = v;\n        // }, function () {\n        //\n        // }, 300, 'CubicEaseOut');\n        // moveTool.move(that.imgState.start.top, that.imgState.end.top, function (v) {\n        //     that.height = v;\n        // }, function () {\n        //\n        // }, 300, 'CubicEaseOut');\n\n        // interX = moveTool.move(that.speed.x, 0, function (v) {\n        // \t// console.log([that.imgState.end.left, that.ow, that.imgState.end.width]);\n        // \tif (that.imgState.end.left <= 0 && that.imgState.end.left >= that.ww - that.imgState.end.width) {\n        // \t\tthat.imgState.end.left = that.imgState.end.left + v / 3 / that.rate;\n        // \t\tthat.imgState.start.left = that.imgState.end.left;\n        // \t\tthat.left = that.imgState.end.left;\n        // \t}\n        // \telse {\n        // \t\tthat.imgState.end.left = that.speed.x >= 0 ? 0 : (that.ww - that.imgState.end.width);\n        // \t\tthat.imgState.start.left = that.imgState.end.left;\n        // \t\tthat.left = that.imgState.end.left;\n        // \t}\n        // }, function () {\n        // \tthat.imgState.start.left = that.imgState.end.left;\n        // \tthat.let = that.imgState.end.left;\n        // \tclearInterval(interX);\n        // \tinterX = null;\n        // }, 500, 'CubicEaseOut');\n        // interY = moveTool.move(that.speed.y, 0, function (v) {\n        // \t// console.log([that.imgState.end.top, that.wh, that.imgState.end.height]);\n        // \tif (that.imgState.end.top <= 0 && that.imgState.end.top >= that.wh - that.imgState.end.height) {\n        // \t\tthat.imgState.end.top = that.imgState.end.top + v / 3 / that.rate;\n        // \t\tthat.imgState.start.top = that.imgState.end.top;\n        // \t\tthat.top = that.imgState.end.top;\n        // \t}\n        // \telse {\n        // \t\tthat.imgState.end.top = that.speed.y >= 0 ? 0 : (that.wh - that.imgState.end.height);\n        // \t\tthat.imgState.start.top = that.imgState.end.top;\n        // \t\tthat.top = that.imgState.end.top;\n        // \t}\n        // }, function () {\n        // \tthat.imgState.start.top = that.imgState.end.top;\n        // \tthat.top = that.imgState.end.top;\n        // \tclearInterval(interY);\n        // \tinterY = null;\n        // }, 500, 'CubicEaseOut');\n        // }\n      },\n      reset () {\n        let that = this\n\n        clearIntervals(interX)\n        clearIntervals(interY)\n\n        that.top = 0\n        that.left = 0\n        that.width = window.innerWidth\n        that.height = 0\n        that.imgState.start.top = 0\n        that.imgState.start.left = 0\n        that.imgState.start.width = 0\n        that.imgState.start.height = 0\n        that.imgState.end.top = 0\n        that.imgState.end.left = 0\n        that.imgState.end.width = 0\n        that.imgState.end.height = 0\n        that.starts.value = []\n        that.moves.value = []\n        that.len.start = 0\n        that.len.move = 0\n        that.rate = 1\n        that.cenX.start = 0\n        that.cenX.move = 0\n        that.cenY.start = 0\n        that.cenY.move = 0\n        that.oh = 0\n        that.ow = 0\n        that.speed.x = 0\n        that.speed.y = 0\n      },\n      popup () {\n        let that = this\n        if (that.img) {\n          //计算初始位置\n          that.oh = that.$refs.img.offsetHeight\n          that.ow = that.$refs.img.offsetWidth\n\n          let initTop = 0\n          //假定初始宽度100%, 如果高度<屏幕高度, 居中图片.\n          if (that.oh < that.wh) {\n            initTop = (that.wh - that.oh) / 2\n          }\n\n          that.top = initTop\n\n          that.imgState.start.top = initTop\n          that.imgState.start.left = 0\n          that.imgState.start.width = that.ow\n          that.imgState.start.height = that.oh\n          that.imgState.end.top = initTop\n          that.imgState.end.left = 0\n          that.imgState.end.width = that.ow\n          that.imgState.end.height = that.oh\n        }\n        setTimeout(function () {\n          that.loading = false\n          that.done = true\n        }, 200)\n      }\n    },\n    watch: {\n      img: function () {\n        let that = this\n        that.loading = true\n      }\n    },\n    mounted: function () {\n      let that = this\n\n      setTimeout(function () {\n        //        that.$emit('on-next', data)\n      }, 5000)\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n\n  div.blk-pop-image {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 999;\n  }\n\n  div.blk-pop-image-close {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    width: 30px;\n    height: 30px;\n    margin: 10px;\n    border: 2px solid #ffffff;\n    border-radius: 17px;\n    z-index: 4;\n    overflow: hidden;\n    transform: rotate(45deg);\n    font-size: 0;\n    & > span {\n      display: inline-block;\n      width: 50%;\n      height: 50%;\n      vertical-align: middle;\n      box-sizing: border-box;\n      &:nth-child(1) {\n        //background: green;\n        border-bottom: 1px solid #ffffff;\n        border-right: 1px solid #ffffff;\n      }\n      &:nth-child(2) {\n        //background: red;\n        border-bottom: 1px solid #ffffff;\n      }\n      &:nth-child(3) {\n        //background: black;\n        border-right: 1px solid #ffffff;\n      }\n      &:nth-child(4) {\n        //background: blue;\n      }\n    }\n  }\n\n  div.blk-pop-image-bg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: #000000;\n    opacity: .8;\n    z-index: 1;\n  }\n\n  img.blk-pop-image-img {\n    position: absolute;\n    z-index: 3;\n    transition-property: opacity, transform;\n    transition-duration: .5s;\n    transform: scale(0, 0);\n    opacity: 0;\n    &.done {\n      opacity: 1;\n      transform: scale(1, 1);\n    }\n  }\n\n  div.blk-pop-image-log {\n    position: absolute;\n    z-index: 5;\n    top: 40px;\n    left: 0;\n    width: 100%;\n    font-size: 12px;\n    color: #ffffff;\n  }\n\n  @keyframes blk-pop-image-loading {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  div.blk-pop-image-loading {\n    position: absolute;\n    z-index: 2;\n    width: 15%;\n    padding-top: 15%;\n    margin: -7.5% 0 0 -7.5%;\n    //border-left: 4px solid #ffffff;\n    //border-right: 4px solid #ffffff;\n    border: 2px dashed #ffffff;\n    left: 50%;\n    top: 50%;\n    border-radius: 50%;\n    animation: blk-pop-image-loading 2s linear infinite;\n  }\n</style>","import Vue from 'vue'\n\nimport xyPopImage from '../components/xy-pop-image.vue'\n\nlet cp = Vue.extend(xyPopImage)\n\nlet handlers = new Map()\n\nlet clicks = new Map()\n\nlet pops = {}\n\nlet instances = {}\n\nlet btnClickCb = function () {\n  console.warn('no moving btn callback function')\n}\n\nfunction btnClick (el) {\n  if (el.getAttribute('lazy') === 'loaded') {\n    var parent = el.parentElement\n    var hasA = false\n\n    while (parent && !parent.classList.contains('xy-article')) {\n      // console.log(parent)\n      parent = parent.parentElement\n      if (parent) {\n        hasA = parent.tagName === 'A'\n        if (hasA) {\n          break\n        }\n      } else {\n        break\n      }\n    }\n\n    if (hasA) {\n      return\n    }\n    // debugger\n    instances[el.dataset.id].visible = true\n    instances[el.dataset.id].img = el.dataset.img\n    instances[el.dataset.id].index = el.dataset.index\n  } else if (el.tagName !== 'IMG') {\n    instances[el.dataset.id].visible = true\n    instances[el.dataset.id].img = el.dataset.img\n    instances[el.dataset.id].index = el.dataset.index\n  }\n}\n\nlet count = 0\n\nexport default {\n  name: 'xy-pop-image',\n  bind: function (el, {value, arg}) {\n    let instance = new cp({\n      el: document.createElement('div')\n    })\n    instance.$el.dataset.id = count++\n    el.dataset.id = instance.$el.dataset.id\n\n    document.body.appendChild(instance.$el)\n    instances[el.dataset.id] = instance\n    pops[el.dataset.id] = value\n\n    if (arg === 'change' && value) {\n      // if (handlers.has(value)) {\n      //   let els = handlers.get(value)\n      //   els.push(el)\n      //   handlers.set(value, els)\n      // } else {\n      //   handlers.set(value, [el])\n      //   instance.$on('on-change', value)\n      // }\n    } else if (arg === 'imgs' && value) {\n      instance.$on('on-change', function (direction, data) {\n        let imgs = pops[el.dataset.id]\n        let idx = imgs.indexOf(instances[el.dataset.id].img)\n        let next = direction === 'pre' ? ((imgs.length + idx - 1) % imgs.length) : ((idx + 1) % imgs.length)\n        console.log('next:', next)\n        instances[el.dataset.id].img = imgs[next]\n      })\n    }\n    btnClickCb = btnClick.bind({}, el)\n    el.addEventListener('click', btnClickCb)\n\n    clicks.set(el, btnClickCb)\n  },\n  unbind: function (el, {value, arg}) {\n    // if (instance) {\n    //   instance.visible = false\n    // }\n    if (arg === 'change' && value) {\n      // debugger\n      // let els = handlers.get(value)\n      // els.splice(els.indexOf(el), 1)\n      // handlers.set(value, els)\n    }\n    let hd = clicks.get(el)\n    el.removeEventListener('click', hd)\n    clicks.delete(el)\n  }\n}","// function baseSize (info, size) {\n//   return {\n//     ot: {\n//       width: size.width,\n//       height: size.height\n//     },\n//     wt: {\n//       width: size.width,\n//       height: size.width * info.height / info.width\n//     },\n//     ht: {\n//       width: size.height * info.width / info.height,\n//       height: size.height\n//     }\n//   }\n// }\n\n// function contain (el, baseInfo) {\n//   if (baseInfo.wt.width === baseInfo.ot.width && baseInfo.wt.height <= baseInfo.ot.height) {\n//     el.style.width = `${baseInfo.wt.width}px`\n//     el.style.height = `${baseInfo.wt.height}px`\n//     el.style.top = `${(baseInfo.ot.height - baseInfo.wt.height) / 2}px`\n//     el.style.left = '0px'\n//   } else if (baseInfo.ht.height === baseInfo.ot.height && baseInfo.ht.width <= baseInfo.ot.width) {\n//     el.style.width = `${baseInfo.ht.width}px`\n//     el.style.height = `${baseInfo.ht.height}px`\n//     el.style.top = '0px'\n//     el.style.left = `${(baseInfo.ot.width - baseInfo.ht.width) / 2}px`\n//   }\n// }\n//\n// function cover (el, baseInfo) {\n//   console.log('baseInfo.wt.width === baseInfo.ot.width && baseInfo.wt.height >= baseInfo.ot.height')\n//   console.log(`${baseInfo.wt.width} === ${baseInfo.ot.width} && ${baseInfo.wt.height} >= ${baseInfo.ot.height}`)\n//   console.log('baseInfo.ht.height === baseInfo.ot.height && baseInfo.ht.width >= baseInfo.ot.width')\n//   console.log(`${baseInfo.ht.height} === ${baseInfo.ot.height} && ${baseInfo.ht.width} >= ${baseInfo.ot.width}`)\n//   if (baseInfo.wt.width === baseInfo.ot.width && baseInfo.wt.height >= baseInfo.ot.height) {\n//     el.style.width = `${baseInfo.wt.width + 2}px`\n//     el.style.height = `${baseInfo.wt.height + 2}px`\n//     el.style.top = `${(-(baseInfo.wt.height - baseInfo.ot.height)) / 2 - 1}px`\n//     el.style.left = `${-1}px`\n//   } else if (baseInfo.ht.height === baseInfo.ot.height && baseInfo.ht.width >= baseInfo.ot.width) {\n//     el.style.width = `${baseInfo.ht.width + 2}px`\n//     el.style.height = `${baseInfo.ht.height + 2}px`\n//     el.style.top = `${-1}px`\n//     el.style.left = `${(-(baseInfo.ht.width - baseInfo.ot.width)) / 2 - 1}px`\n//   }\n//   console.log('el.style.width', el.style.width)\n//   console.log('el.style.height', el.style.height)\n//   console.log('el.style.top', el.style.top)\n//   console.log('el.style.left', el.style.left)\n// }\n\n// window.addEventListener('resize', function () {\n//   //lazy-cover loaded resize\n//   //lazy-contain loaded resize\n//   document.querySelectorAll('.lazy-contain.loaded.resize')\n//           .forEach(function (el) {\n//             let parent = el.parentElement\n//             let baseInfo = baseSize({\n//               width: el.offsetWidth,\n//               height: el.offsetHeight\n//             }, {\n//               width: parent.offsetWidth,\n//               height: parent.offsetHeight\n//             })\n//             contain(el, baseInfo)\n//           })\n//   document.querySelectorAll('.lazy-cover.loaded.resize')\n//           .forEach(function (el) {\n//             let parent = el.parentElement\n//             let baseInfo = baseSize({\n//               width: el.offsetWidth,\n//               height: el.offsetHeight\n//             }, {\n//               width: parent.offsetWidth,\n//               height: parent.offsetHeight\n//             })\n//             cover(el, baseInfo)\n//           })\n// })\n\nexport default {\n  preLoad: 1.5,\n  // error: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAQAAACSoYmJAAACwElEQVRo3u3b3VLaQBTA8Z1x5NoHo9f6OPgIouNb+BZFg1SBWlsL41dLK+FDW2UUEPj3AqEYErIJQfa0OXsN85vM2bN7IEepqWCVJFvsU6XNsqJNlX22SLKq/II1UtQwKeqkWJtF3qCKiVFlwx28wi4mxy4r0+Q9TI89B5ttJMTOJHkdKbH+t2LYYtD2SyUhhaRIKaVIGFaX/aJGQpFEWiQVaXHobcV7ceiMEpbRADVFRxy6oxAY/x56QIMyebLkKFKmycB09C0FLMcq0DQXPeB6Cjxa10t/3h5ob/KQbSC6OZNsYS05SZRbahz7oo+XmiLKrf21NFbdLHRJC10yC53XQufNQh9qobNmoXMS0QWJ6SFyI4oseXqHSz8+xv/XCxMMuPQkX5p6NR0mibAmYPS865TIkyVLnhL1yJ/xD66kNbY3LxW/Lwdtj5PulGcZ6NdHWDHQv39LQjfJOrb4ES2z0bdTZAuLHHfmon+5kofX3ZqZ6N8+TUbFPPSDRotx7nsavCm6pdkVndEzBf3IkRbZwuKEbnTob1o55xZPAcjDdu4xCvSAC+2t4oy2RmPhXB+4nxc9oBxoh09GR/O3FOc69LhTaqL7nAUuTKPoavb37usmLLrHaah6CvDMxznIFlY4dJeT0MdAz+OzC0Z3KIY+vXp8mpscAv3ks4UqM/fB5wjIgdEtjdpa8aw2XyIhB0Tfax66FVfy14jIgdB3mj/5urEna/obohued14d9nmEZG20HZD8mn0RKVkT/TPklw/ZVxGTNdHhv77C98jJC0cvZsXoGB2jY3SMjtExOkYvGy3yBVmRryJnxKEzQl+vlzfI8E6RoCEro0nIHM4RNgZVGw9UCho4mxymZEcEeUf+EKXIcdXxYLCZW9L2GAweD1RuGla3G2zOHMGeGHZPc4A987/exUYXmwPSJElMC/8AAsbzwJ8A0u0AAAAASUVORK5CYII=',\n  // loading: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTklEQVQ4y52SPU8CQRBAtzI2mljxD4yJNvoH/FcmGCPe7awGRbidhWAQ/GJn7tBGG8Roa2FlR2kriYmVxESLsYBGNMrx2s17m50dpUYICvUMWNoC5C4g9wF5To1LoXaR1dYLIAsgfwLyPSBNjyUH1tey+YaEEXWNi1dVGvLl1jpYkqPWTV2lRbvmbK50JjuV5ElNgkEPxrFoy8sTBcByD5Df1aQMJ/6Q/uk8BcgzyrhYAOPUAeP4HJA/VFCiXr7a6qcNbJfjtyAiUSHyvkGSoNiYH1euNjuZsERiKj5Rm8U4kyt6MZXkMcXtnTAi0fZ8QSml1G6V9rRlOaB2/t/hRfEaWC/aJcffDkJLlxuFE9GRvzOOV0bFBrWXdOSvAmTRlm9/r1u2evCtAsgvgNwBpGtw/AzIogfy4d97UeZFsHF9GBAYSK9hRKca6ce2fgEBIMcpno6nCQAAAABJRU5ErkJggg==',\n  // loading: 'data:image/gif;base64,R0lGODlhCgAKAJEDAMzMzP9mZv8AAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAADACwAAAAACgAKAAACF5wncgaAGgJzJ647cWua4sOBFEd62VEAACH5BAUAAAMALAEAAAAIAAMAAAIKnBM2IoMDAFMQFAAh+QQFAAADACwAAAAABgAGAAACDJwHMBGofKIRItJYAAAh+QQFAAADACwAAAEAAwAIAAACChxgOBPBvpYQYxYAIfkEBQAAAwAsAAAEAAYABgAAAgoEhmPJHOGgEGwWACH5BAUAAAMALAEABwAIAAMAAAIKBIYjYhOhRHqpAAAh+QQFAAADACwEAAQABgAGAAACDJwncqi7EQYAA0p6CgAh+QQJAAADACwHAAEAAwAIAAACCpRmoxoxvQAYchQAOw==',\n  attempt: 3,\n  // throttleWait: 500,\n  // listenEvents: ['resize'],\n  //lazyload 自动resize\n  // dispatchEvent: true,\n  // observer: true,\n  // silent: false,\n  //TODO:瑕疵点: 还没加载完成图片, 数据更新, 重新加载时, 偶发加载图片样式有误.\n  //原因: Lazyload的loading事件有几率滞后于替换为loading的图片.\n  //导致上一张图片大小遗留影响到loading图片.\n  adapter: {\n    loaded ({el}, formCache) {\n      let parent = el.parentElement\n      parent.style.backgroundImage = `url(\"${el.src}\")`\n      // parent.style.backgroundColor = 'inherit'\n      // parent.style.backgroundRepeat = 'no-repeat'\n      // parent.style.backgroundPosition = 'inherit'\n      if (el.classList.contains('lazy-contain')) {\n        parent.style.backgroundSize = 'contain'\n      } else if (el.classList.contains('lazy-cover')) {\n        parent.style.backgroundSize = 'cover'\n      } else {\n        parent.style.backgroundSize = '100%'\n        parent.style.height = `${el.offsetHeight}px`\n      }\n\n      parent.classList.remove('loading')\n      parent.classList.remove('error')\n      parent.classList.add('loaded')\n\n      // el.classList.remove('loading')\n      // el.classList.remove('error')\n      //\n      // if (el.classList.contains('lazy-contain') || el.classList.contains('lazy-cover')) {\n      //   if (el.classList.contains('loading')) {\n      //     //            console.warn('loaded')\n      //   } else if (formCache) {\n      //     //            console.warn('loaded from cache')\n      //     el.style.width = null\n      //     el.style.height = null\n      //     el.style.top = null\n      //     el.style.left = null\n      //     el.style.marginLeft = null\n      //     el.style.marginTop = null\n      //   }\n      //\n      //   console.log('el.offsetWidth', el.offsetWidth, 'el.offsetHeight', el.offsetHeight)\n      //   console.log('parent.offsetWidth', parent.offsetWidth, 'parent.offsetHeight', parent.offsetHeight)\n      //\n      //   let baseInfo = baseSize({\n      //     width: el.offsetWidth,\n      //     height: el.offsetHeight\n      //   }, {\n      //     width: parent.offsetWidth,\n      //     height: parent.offsetHeight\n      //   })\n      //\n      //   console.log('baseInfo:')\n      //   console.log(JSON.stringify(baseInfo))\n      //\n      //   el.classList.add('resize')\n      //\n      //   if (el.classList.contains('lazy-contain')) {\n      //     contain(el, baseInfo)\n      //   } else if (el.classList.contains('lazy-cover')) {\n      //     cover(el, baseInfo)\n      //   }\n      // }\n      // el.classList.add('loaded')\n    },\n    loading ({el}) {\n      let parent = el.parentElement\n      let min = parent.offsetWidth > parent.offsetHeight ? parent.offsetHeight : parent.offsetWidth\n      parent.style.backgroundImage = 'url(\"data:image/gif;base64,R0lGODlhEgASAIABAKa4zP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAwABACwAAAAAEgASAEACJwyOoYa3D6N8rVqgLp5M2+x9XcWBTTmGTqqa6qqxFInWUMzhk76TBQAh+QQJAwABACwAAAAAEgASAEACKQyOoYa3D6NUrdHqGJ44d3B9m1ZNZGZ+YXmKnsuq44qaNqSmnZ3rllIAACH5BAkDAAEALAAAAAASABIAQAIpDI6hhrcPo2zt0cRuvG5xoHxfyE2UZJWeKrLtmZ3aWqG2OaOjvfPwUgAAIfkECQMAAQAsAAAAABIAEgBAAigMjqGGtw8jbC3SxO67bnLFhQD4bZRkap4qli37qWSF1utZh7a+41ABACH5BAkDAAEALAAAAAASABIAQAIqDI6hhrcP42pNMgoUdpfanXVgJSaaZ53Yt6kj+a6lI7tcioN5m+o7KSkAACH5BAkDAAEALAAAAAASABIAQAIoDI6hhrcPI2tOKpom3vZyvVEeBgLdKHYhGjZsW63kMp/Sqn4WnrtnAQAh+QQJAwABACwAAAAAEgASAEACKAyOocvtCCN0TB5lM6Ar92hYmChxX2l6qRhqYAui8GTOm8rhlL6/ZgEAIfkECQMAAQAsAAAAABIAEgBAAigMjqHL7QgjdEyeJY2leHOdgZF4KdYJfGTynaq7XmGctuicwZy+j2oBACH5BAkDAAEALAAAAAASABIAQAInDI6hy+0II3RMHrosUFpjbmUROJFdiXmfmoafMZoodUpyLU5sO1MFACH5BAkDAAEALAAAAAASABIAQAImDI6hy+2GDozyKZrspBf7an1aFy2fuJ1Z6I2oho2yGqc0SYN1rRUAIfkECQMAAQAsAAAAABIAEgBAAiYMjqHL7W+QVLJaAOnVd+eeccliRaXZVSH4ee0Uxg+bevUJnuIRFAAh+QQJAwABACwAAAAAEgASAEACKoyBacvtnyI4EtH6QrV6X5l9UYgt2DZ1JRqqIOm1ZUszrIuOeM6x8x4oAAAh+QQJAwABACwAAAAAEgASAEACKIwNqcftryJAMrFqG55hX/wcnlN9UQeipZiGo9vCZ0hD6TbiN7hSZwEAIfkECQMAAQAsAAAAABIAEgBAAiiMH6CL7Z+WNHK2yg5WdLsNQB12VQgJjmZJiqnriZEl1y94423aqlwBACH5BAkDAAEALAAAAAASABIAQAIrjH+gi+2+IjCSvaoo1vUFPHnfxlllBp5mk4qt98KSSKvZCHZ4HtmTrgoUAAAh+QQFAwABACwAAAAAEgASAEACKIyPAcvpr5g0csJYc8P1cgtpwDceGblQmiey69W6oOfEon2f6KirUwEAIfkECQMAAQAsAAAPAAgAAwBAAgSMj6lXACH5BAkDAAEALAAAAAASABIAQAIYjI+JwK0Po5y02glUvrz7bzXiBpbLaD4FACH5BAkDAAEALAAAAAASABIAQAImjI8By8qfojQPTldzw/VymB3aCIidN6KaGl7kSnWpC6ftt00zDRUAIfkECQMAAQAsAAAAABIAEgBAAiaMjwHLyp+iNA9WcO6aVHOneWBYZeUXouJEiu1lWit7jhCX4rMEFwAh+QQJAwABACwAAAAAEgASAEACJ4yPAcvKn6I0r1pA78zWQX51XrWBSzl+Uxia7Jm+mEujW3trubg3BQAh+QQFAwABACwAAAAAEgASAEACJwyOoYa3D6N8rVqgLp5M2+x9XcWBTTmGTqqa6qqxFInWUMzhk76TBQA7\")'\n      // parent.style.backgroundColor = 'inherit'\n      // parent.style.backgroundRepeat = 'no-repeat'\n      // parent.style.backgroundPosition = 'center'\n      parent.style.backgroundSize = `${(min / 3) > 18 ? 18 : (min / 3)}px`\n      parent.classList.remove('loaded')\n      parent.classList.remove('error')\n      parent.classList.add('loading')\n      // if (!el.classList.contains('loading')) {\n      //   el.classList.remove('loaded')\n      //   el.classList.remove('error')\n      //   el.classList.add('loading')\n      //   if (el.classList.contains('lazy-contain') || el.classList.contains('lazy-cover')) {\n      //     el.style.width = null\n      //     el.style.height = null\n      //     el.style.top = null\n      //     el.style.left = null\n      //     el.style.marginLeft = null\n      //     el.style.marginTop = null\n      //   }\n      // }\n    },\n    error ({el}) {\n      let parent = el.parentElement\n      let min = parent.offsetWidth > parent.offsetHeight ? parent.offsetHeight : parent.offsetWidth\n      parent.style.backgroundImage = 'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAQAAACSoYmJAAACwElEQVRo3u3b3VLaQBTA8Z1x5NoHo9f6OPgIouNb+BZFg1SBWlsL41dLK+FDW2UUEPj3AqEYErIJQfa0OXsN85vM2bN7IEepqWCVJFvsU6XNsqJNlX22SLKq/II1UtQwKeqkWJtF3qCKiVFlwx28wi4mxy4r0+Q9TI89B5ttJMTOJHkdKbH+t2LYYtD2SyUhhaRIKaVIGFaX/aJGQpFEWiQVaXHobcV7ceiMEpbRADVFRxy6oxAY/x56QIMyebLkKFKmycB09C0FLMcq0DQXPeB6Cjxa10t/3h5ob/KQbSC6OZNsYS05SZRbahz7oo+XmiLKrf21NFbdLHRJC10yC53XQufNQh9qobNmoXMS0QWJ6SFyI4oseXqHSz8+xv/XCxMMuPQkX5p6NR0mibAmYPS865TIkyVLnhL1yJ/xD66kNbY3LxW/Lwdtj5PulGcZ6NdHWDHQv39LQjfJOrb4ES2z0bdTZAuLHHfmon+5kofX3ZqZ6N8+TUbFPPSDRotx7nsavCm6pdkVndEzBf3IkRbZwuKEbnTob1o55xZPAcjDdu4xCvSAC+2t4oy2RmPhXB+4nxc9oBxoh09GR/O3FOc69LhTaqL7nAUuTKPoavb37usmLLrHaah6CvDMxznIFlY4dJeT0MdAz+OzC0Z3KIY+vXp8mpscAv3ks4UqM/fB5wjIgdEtjdpa8aw2XyIhB0Tfax66FVfy14jIgdB3mj/5urEna/obohued14d9nmEZG20HZD8mn0RKVkT/TPklw/ZVxGTNdHhv77C98jJC0cvZsXoGB2jY3SMjtExOkYvGy3yBVmRryJnxKEzQl+vlzfI8E6RoCEro0nIHM4RNgZVGw9UCho4mxymZEcEeUf+EKXIcdXxYLCZW9L2GAweD1RuGla3G2zOHMGeGHZPc4A987/exUYXmwPSJElMC/8AAsbzwJ8A0u0AAAAASUVORK5CYII=\")'\n      // parent.style.backgroundColor = '#d9d9d9'\n      // parent.style.backgroundRepeat = 'no-repeat'\n      // parent.style.backgroundPosition = 'center'\n      parent.style.backgroundSize = `${(min / 3) > 90 ? 90 : (min / 3)}px`\n      parent.classList.remove('loaded')\n      parent.classList.remove('loading')\n      parent.classList.add('error')\n      // el.classList.remove('loaded')\n      // el.classList.remove('loading')\n      // el.classList.add('error')\n      // el.classList.remove('resize')\n      //\n      // if (el.classList.contains('lazy-contain') || el.classList.contains('lazy-cover')) {\n      //   el.style.width = null\n      //   el.style.height = null\n      //   el.style.top = null\n      //   el.style.left = null\n      //   el.style.marginLeft = null\n      //   el.style.marginTop = null\n      // }\n    }\n  }\n}\n","<template>\n  <div class=\"xy-article\">\n    <div id=\"xy-article__point\"></div>\n  </div>\n</template>\n<script>\n  import Vue from 'vue'\n\n  export default {\n    name: 'xy-article',\n    data () {\n      return {\n        done: false\n      }\n    },\n    props: {\n      des: {\n        type: String,\n        default: ''\n      }\n    },\n    watch: {\n      des: function (n) {\n        let that = this\n        that.update()\n      }\n    },\n    computed: {\n      html () {\n        let that = this\n        return that.array.join('')\n      }\n    },\n    methods: {\n      //      replace (txt) {\n      //        return txt.replace(/(<img.*?)(src=\")(.*?)(\".*?>)/g, `<div class=\"lazy-load\">$1v-lazy=\"'$3'$4</div>`)\n      //      },\n      update () {\n        let that = this\n        if (that.des && !that.done) {\n          //          let start = 0\n          //          that.array = []\n          //          let ms = that.des.match(/(<img .*?>)/g)\n          //          for (let i = 0; i < ms.length; i++) {\n          //            let lc = that.des.indexOf(ms[i], start)\n          //            if (start !== lc) {\n          //              that.array.push(that.des.substr(start, lc))\n          //            }\n          //            that.array.push(that.replace(that.des.substr(lc, ms[i].length)))\n          //            start = lc + ms[i].length\n          //          }\n          //          if (start < that.des.length) {\n          //            that.array.push(that.replace(that.des.substring(start, that.des.length)))\n          //          }\n\n          //          console.log(that.array.map(function (item) {\n          //            return item.value\n          //          }))\n          //          let ta = tmp.split('')\n          //          for (let i = 0; i < ms.length; i++) {\n          //            let lc = tmp.indexOf(ms[i])\n          //            let txt = ''\n          //            if (lc > 0) {\n          //              //              debugger\n          //              txt = ta.splice(0, lc)\n          //                      .join('')\n          //              that.array.push({\n          //                type: 'txt',\n          //                value: txt\n          //              })\n          //              tmp = tmp.replace(txt, '')\n          //            }\n          //            //            debugger\n          //            txt = ta.splice(0, ms[i].length)\n          //                    .join('')\n          //            that.array.push({\n          //              type: 'img',\n          //              value: txt\n          //            })\n          //            tmp = tmp.replace(txt, '')\n          //          }\n          //          if (tmp) {\n          //            that.array.push({\n          //              type: 'txt',\n          //              value: tmp\n          //            })\n          //          }\n          //          let tpl = `<div>${that.des.replace(/(<img.*?)(src=[\"'])(.*?)([\"'].*?)(.*?>)/g, '<div class=\"lazy-load\">$1v-lazy=\"\\'$3\\'$4 v-xy-pop-image data-img=\"$3\" data-index=\"0\" $5</div>')}</div>`\n          let tpl = `<div>${that.des.replace(/(<img.*?)(src=[\"'])(.*?)([\"'])(.*?>)/g, '<div class=\"lazy-load\"><img v-lazy=\"\\'$3\\'\" v-xy-pop-image data-img=\"$3\"></div>')}</div>`\n          let ls = tpl.match(/v-lazy=\"'(.*?)'\"/g)\n          if (ls) {\n            let imgs = []\n            for (let i = 0; i < ls.length; i++) {\n              let src = ls[i].replace(/v-lazy=\"'(.*?)'\"/g, '$1')\n              imgs.push(`'${src}'`)\n              tpl = tpl.replace(src, `${src}?idx=${i}`)\n            }\n            tpl = tpl.replace(/v-xy-pop-image/g, `v-xy-pop-image:imgs=\"[${imgs.join(',')}]\"`)\n          }\n          //          let idx = tpl.indexOf('a',7)\n          //          while (){\n          //\n          //          }\n          //          console.log(tpl)\n          var text = Vue.extend({\n            template: tpl\n          })\n          new text().$mount('#xy-article__point')\n          that.done = true\n        }\n      }\n    },\n    data () {\n      return {\n        array: []\n      }\n    },\n    mounted: function () {\n      let that = this\n      that.update()\n    }\n  }\n</script>\n\n<style>\n  .xy-article {\n    img {\n      width: 100%;\n      height: auto;\n    }\n  }\n</style>","<template>\n</template>\n\n<script>\n  export default {\n    name: 'xy-reach-bottom',\n    props: {\n      threshold: {\n        type: String,\n        default: 0\n      }\n    },\n    data () {\n      return {\n        done: true\n      }\n    },\n    mounted: function () {\n      let that = this\n      window.addEventListener('scroll', function (e) {\n        let threshold = parseInt(that.threshold)\n        threshold = isNaN(threshold) ? 0 : threshold\n        console.log(`${window.scrollY} + ${threshold} >= ${document.body.scrollHeight} - ${window.innerHeight} = ${document.body.scrollHeight - window.innerHeight}`)\n        if (window.scrollY + threshold >= document.body.scrollHeight - window.innerHeight) {\n          if (!that.done) {\n            that.done = true\n            that.$emit('on-bottom')\n            console.log('reach bottom')\n          }\n        } else {\n          that.done = false\n        }\n      })\n    }\n  }\n</script>","<template>\n  <div class=\"xy-scale-slider\"\n       :style=\"{'padding':`0 ${paddingRSH}vw`,'height':`${heightRSH}vw`}\">\n    <div :style=\"{'width':`${wideRSH}vw`,'left':`${leftRSH}vw`}\"\n         @touchstart=\"onTouchstart\"\n         @touchmove=\"onTouchmove\"\n         @touchend=\"onTouchend\"\n         :class=\"{'xy-scale-slider--auto':auto}\">\n      <router-link tag=\"a\"\n                   :to=\"item.href\"\n                   class=\"lazy-load\"\n                   :class=\"{'xy-scale-slider--wait-r':index>current,'xy-scale-slider--wait-l':index<current}\"\n                   :style=\"{'width':`${widthRSH}vw`,'height':`${heightRSH}vw`,'margin':`0 ${marginRSH}vw`}\"\n                   v-for=\"(item, index) in imgs\"\n                   :key=\"item.id\">\n        <img v-lazy=\"item.src\"\n             class=\"lazy-cover\"\n             :alt=\"item.name\">\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\n  let timer = null\n  export default {\n    name: 'xy-scale-slider',\n    props: {\n      width: {\n        type: String,\n        default: 0\n      },\n      height: {\n        type: String,\n        default: 0\n      },\n      imgs: {\n        type: Array,\n        default: []\n      },\n      interval: {\n        type: String,\n        default: '1'\n      }\n    },\n    data () {\n      return {\n        current: 0,\n        cur: -1,\n        paddingRSH: 0,\n        wideRSH: 0,\n        widthRSH: 0,\n        marginRSH: 0,\n        heightRSH: 0,\n        leftRSH: 0,\n\n        auto: true,\n\n        sx: 0,\n        mx: 0,\n        ex: 0\n      }\n    },\n    computed: {\n      itv () {\n        let that = this\n        return parseInt(that.interval) * 1000\n      }\n    },\n    watch: {\n      imgs (nv, ov) {\n        let that = this\n        that.current = 0\n        that.change(true)\n      }\n    },\n    mounted: function () {\n      let that = this\n      that.change()\n      that.start()\n    },\n    methods: {\n      onTouchstart ({touches: [touch]}) {\n        let that = this\n        that.stop()\n        that.auto = false\n        that.sx = touch.clientX\n        that.mx = touch.clientX\n      },\n      onTouchmove (e) {\n        let that = this\n        let {touches: [touch]} = e\n\n        that.auto = false\n        that.mx = touch.clientX\n        that.leftRSH = (that.mx - that.sx + that.ex) / (750 / 2) * 100\n        if (that.sx !== that.mx) {\n          e.preventDefault()\n          e.stopPropagation()\n        }\n      },\n      onTouchend ({changedTouches: [touch]}) {\n        let that = this\n        that.auto = true\n\n        let tr = Math.abs((that.leftRSH + that.marginRSH) % (that.marginRSH * 2 + that.widthRSH))\n        let cr = (that.marginRSH * 2 + that.widthRSH) / 3\n        let wr = (that.marginRSH * 2 + that.widthRSH)\n\n        if (that.mx - that.sx > 0) {\n          if (wr - tr > cr) {\n            that.current--\n          }\n        } else if (that.mx - that.sx < 0) {\n          if (tr > cr) {\n            that.current++\n          }\n        }\n\n        that.update()\n        that.start()\n      },\n      change (force) {\n        let that = this\n\n        that.widthRSH = that.width * 100 / 750\n        that.paddingRSH = (100 - that.widthRSH) / 2\n        that.marginRSH = that.paddingRSH / 4\n        that.wideRSH = (that.marginRSH * 2 + that.widthRSH) * that.imgs.length\n        that.heightRSH = that.height * 100 / 750\n\n        that.update(force)\n      },\n      update (force) {\n        let that = this\n\n        if (that.current < 0) {\n          that.current = 0\n        } else if (that.current >= that.imgs.length) {\n          that.current = that.imgs.length - 1\n        }\n\n        //        console.log(that.cur, that.current)\n        if (that.cur !== that.current || force) {\n          that.cur = that.current\n\n          that.$emit('on-change', that.imgs[that.current], that.current, that.imgs.length)\n        }\n\n        that.leftRSH = -(that.marginRSH * 2 + that.widthRSH) * that.current - that.marginRSH\n\n        that.ex = that.leftRSH * 750 / 2 / 100\n      },\n      stop () {\n        clearInterval(timer)\n        timer = null\n      },\n      start () {\n        let that = this\n        that.stop()\n        timer = setInterval(function () {\n          that.current++\n          if (that.current >= that.imgs.length) {\n            that.current = 0\n          }\n          that.update()\n        }, that.itv)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  .xy-scale-slider {\n    overflow: hidden;\n    font-size: 0;\n    box-sizing: border-box;\n    & > div {\n      white-space: nowrap;\n      width: auto;\n      position: relative;\n      box-sizing: border-box;\n      &.xy-scale-slider--auto {\n        transition: left .3s ease-in-out;\n      }\n      & > a {\n        display: inline-block;\n        box-sizing: border-box;\n        transition: transform .3s ease-in-out;\n        -webkit-tap-highlight-color: transparent;\n        &.xy-scale-slider--wait-r, &.xy-scale-slider--wait-l {\n          transform: scale(.8);\n        }\n        &.xy-scale-slider--wait-r {\n          transform-origin: 0 center;\n        }\n        &.xy-scale-slider--wait-l {\n          transform-origin: 100% center;\n        }\n      }\n    }\n  }\n</style>","<style lang=\"scss\"\n       scoped>\n  @import \"../scss/mixin\";\n\n  div.xy-list-status {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    /*padding-bottom: rsh(30);*/\n    font-style: normal;\n    font-size: rsh(28);\n    color: rgba(166, 166, 166, 1);\n    line-height: rsh(80);\n    text-align: center;\n    &.xy-list-status--loading {\n      & > div {\n        @keyframes xy-list-status__char {\n          0% {\n            top: 0;\n          }\n          50% {\n            top: rsh(10);\n          }\n          100% {\n            top: 0;\n          }\n        }\n        & > span {\n          position: relative;\n          animation: xy-list-status__char .6s ease-in infinite;\n          &:nth-child(1) {\n            animation-delay: 0s;\n          }\n          &:nth-child(2) {\n            animation-delay: .2s;\n          }\n          &:nth-child(3) {\n            animation-delay: .4s;\n          }\n        }\n      }\n    }\n  }\n</style>\n<template>\n  <div class=\"xy-list-status\"\n       v-if=\"status!==''\"\n       :class=\"{'xy-list-status--empty':status==='empty','xy-list-status--nomore':status==='nomore','xy-list-status--loading':status==='loading','xy-list-status--empty--short':status==='empty-short'}\"\n       :style=\"{height:status==='empty'?`calc(100vh - ${top}px - ${bv}vw)`:'auto'}\">\n    <slot name=\"empty\"\n          v-if=\"status==='empty'||status==='empty-short'\">\n      <span>暂无内容</span>\n    </slot>\n    <slot name=\"nomore\"\n          v-if=\"status==='nomore'\">\n      <span>没有更多了</span>\n    </slot>\n    <div v-if=\"status==='loading'\"><span>加</span><span>载</span><span>中</span></div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'xy-list-status',\n    props: {\n      status: String,\n      bottom: {\n        default: '0'\n      }\n    },\n    data () {\n      return {\n        top: 0\n      }\n    },\n    computed: {\n      bv: function () {\n        let that = this\n        return parseInt(that.bottom) / 750 * 100\n      }\n    },\n    watch: {\n      status: function () {\n        let that = this\n        that.top = Math.floor(that.$el.parentElement.getBoundingClientRect().top)\n      }\n    }\n  }\n</script>\n","<style lang=\"scss\"\n       scoped>\n  .xy-time-count {\n    & > label {\n      padding: 0 1px;\n    }\n  }\n</style>\n<template>\n  <div class=\"xy-time-count\">\n    {{label ? `${label}: ` : ''}}<span v-if=\"day>0\">{{day}}</span><label v-if=\"day>0\">天</label><span>{{hourStr}}</span><label for=\"\">:</label><span>{{minStr}}</span><label for=\"\">:</label><span>{{secStr}}</span>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'xy-time-count',\n    props: {\n      time: {\n        type: Date,\n        default: new Date()\n      },\n      label: {\n        type: String,\n        default: ''\n      }\n    },\n    computed: {\n      hourStr () {\n        let that = this\n        return that.hour.toString()\n                   .padStart(2, '0')\n      },\n      minStr () {\n        let that = this\n        return that.min.toString()\n                   .padStart(2, '0')\n      },\n      secStr () {\n        let that = this\n        return that.sec.toString()\n                   .padStart(2, '0')\n      }\n    },\n    data () {\n      let now = (new Date()).getTime()\n      return {\n        day: 0,\n        hour: 0,\n        min: 0,\n        sec: 0,\n        tm: 0,\n        timer: null,\n        now: now\n      }\n    },\n    methods: {\n      update () {\n        let that = this\n        that.now = (new Date()).getTime()\n        let snap = that.tm - that.now\n        if (snap >= 0) {\n          that.day = Math.floor(snap / 86400000) // 1000 / 60 / 60 / 24\n          that.hour = Math.floor((snap % 86400000) / 3600000) // 1000 / 60 / 60\n          that.min = Math.floor((snap % 3600000) / 60000) // 1000 / 60\n          that.sec = Math.floor((snap % 60000) / 1000) // 1000\n        } else {\n          clearInterval(that.timer)\n          that.timer = null\n          that.$emit('finish')\n        }\n        //        console.log(snap)\n      }\n    },\n    mounted: function () {\n      let that = this\n      that.tm = that.time.getTime()\n      if (that.now < that.tm) {\n        that.update()\n        that.timer = setInterval(function () {\n          that.update()\n        }, 1000)\n      }\n    },\n    beforeDestroy: function () {\n      let that = this\n      clearInterval(that.timer)\n      that.timer = null\n    }\n  }\n</script>","function formatDate (d, fmt) {\n  let date = new Date(d)\n  var o = {\n    'M+': date.getMonth() + 1, // 月份\n    'd+': date.getDate(), // 日\n    'h+': date.getHours(), // 小时\n    'm+': date.getMinutes(), // 分\n    's+': date.getSeconds(), // 秒\n    'q+': Math.floor((date.getMonth() + 3) / 3), // 季度\n    'S': date.getMilliseconds() // 毫秒\n  }\n  var format = fmt\n  if (/(y+)/.test(format)) format = format.replace(RegExp.$1, String(date.getFullYear())\n    .substr(4 - RegExp.$1.length))\n  for (var k in o) {\n    if (new RegExp('(' + k + ')').test(format)) {\n      format = format.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(String(o[k]).length)))\n    }\n  }\n  return format\n}\n\nfunction relativeDate (v) {\n  var now = new Date()\n  var time = new Date(v)\n  var span = now - time\n  var day = Math.floor(span / 86400000)\n  var hour = Math.floor(span / 3600000)\n  var minute = Math.floor(span / 60000)\n  // var second = Math.floor(span / 1000)\n\n  if (day > 1) {\n    return this.formatDate(time, 'yyyy-MM-dd hh:mm')\n  } else if (day > 0 && day <= 1) {\n    return `${day.toString()}天前`\n  } else if (hour > 0) {\n    return `${hour.toString()}小时前`\n  } else if (minute > 0) {\n    return `${minute.toString()}分钟前`\n  }\n  return '刚刚'\n}\n\nexport {\n  formatDate,\n  relativeDate\n}","function numberAfterPoint (v, l = 2) {\n  let n = Number(v)\n  let str = n.toString()\n  let result = '.'.padEnd(l + 1, '0')\n  if (str.includes('.')) {\n    result = n.toString()\n              .replace(/\\d+(\\.)/, '$1')\n              .padEnd(l + 1, '0')\n  }\n  return result.substr(0, l + 1)\n}\n\nexport {\n  numberAfterPoint\n}","function isIdCard (card) {\n  var reg = /(^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$)|(^[1-9]\\d{5}\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{2}$)/\n  return {\n    valid: reg.test(card),\n    msg: '身份证号不正确'\n  }\n}\n\nexport {\n  isIdCard\n}","function sleep (ms) {\n  return (function () {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        console.log('done')\n        resolve()\n      }, ms)\n    })\n  })()\n}\n\nfunction browser () {\n  let result = {\n    type: '',\n    wx: false\n  }\n  if (navigator) {\n    if (/(iPhone|iPad|iPod|iOS|Android|X11)/i.test(navigator.userAgent)) {\n      var u = navigator.userAgent\n      var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1 || u.indexOf('X11') > -1 //android终端\n      var isiOS = Boolean(u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) //ios终端\n      if (isAndroid) {\n        result.type = 'android'\n      } else if (isiOS) {\n        result.type = 'ios'\n      } else {\n        result.type = 'other'\n      }\n      result.wx = /MicroMessenger/.test(u)\n    } else {\n      result.type = 'pc'\n    }\n  }\n  return result\n}\n\nexport {\n  sleep,\n  browser\n}","import Base from './scss/base.scss'\nimport Page from './scss/nuxt/page.scss'\nimport Style from './scss/style.scss'\n\nimport xyKeepTop from './directives/xy-keep-top'\nimport xyMovingBtn from './directives/xy-moving-btn'\nimport xyHoverBtn from './directives/xy-hover-btn'\nimport xyPullRefresh from './directives/xy-pull-refresh'\nimport xyPopImage from './directives/xy-pop-image'\n\nimport xyLazyloadResize from './plugins/xy-lazyload-resize'\n// import VueLazyload from 'vue-lazyload'\n\n// import MessageBox from './mint-ui/packages/message-box'\n// import Toast from './mint-ui/packages/toast'\n// import Indicator from './mint-ui/packages/indicator'\n// import Field from './mint-ui/packages/field'\n\nimport xyArticle from './components/xy-article.vue'\nimport xyReachBottom from './components/xy-reach-bottom.vue'\nimport xyScaleSlider from './components/xy-scale-slider.vue'\nimport xyListStatus from './components/xy-list-status.vue'\nimport xyTimeCount from './components/xy-time-count.vue'\n\nimport {\n  formatDate,\n  relativeDate\n} from './prototypes/xy-date-format'\n\nimport {\n  numberAfterPoint\n} from './prototypes/xy-number'\n\nimport {\n  isIdCard\n} from './prototypes/xy-validate'\n\nimport {\n  sleep,\n  browser\n} from './prototypes/xy-tools'\n\nconst xyUI = {\n  install (Vue) {\n    Vue.directive(xyKeepTop.name, xyKeepTop)\n    Vue.directive(xyMovingBtn.name, xyMovingBtn)\n    Vue.directive(xyHoverBtn.name, xyHoverBtn)\n    Vue.directive(xyPullRefresh.name, xyPullRefresh)\n    Vue.directive(xyPopImage.name, xyPopImage)\n\n    // 再次, 解决一个奇怪的依赖关系\n    // Vue.use(VueLazyload, xyLazyloadResize)\n\n    // 尽量按依赖关系按顺序注册\n    Vue.component(xyArticle.name, xyArticle)\n    Vue.component(xyReachBottom.name, xyReachBottom)\n    Vue.component(xyScaleSlider.name, xyScaleSlider)\n    Vue.component(xyListStatus.name, xyListStatus)\n    Vue.component(xyTimeCount.name, xyTimeCount)\n    // Vue.MessageBox = MessageBox\n    // Vue.prototype.$messageBox = MessageBox\n    // Vue.Toast = Toast\n    // Vue.prototype.$toast = Toast\n    // Vue.Indicator = Indicator\n    // Vue.prototype.$indicator = Indicator\n    // Vue.component(Field.name, Field)\n\n    Vue.filter('formatDate', formatDate)\n\n    Vue.prototype.$xyFormat = {\n      formatDate,\n      relativeDate\n    }\n    Vue.prototype.$xyNumber = {\n      numberAfterPoint\n    }\n    Vue.prototype.$xyValidate = {\n      isIdCard\n    }\n    Vue.prototype.$xyTools = {\n      sleep,\n      browser\n    }\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(xyUI)\n  window.Vue.use(VueLazyload, xyLazyloadResize)\n}\n\nexport default xyUI\n\n// let mintUI = {\n//   // MessageBox,\n//   // Toast,\n//   // Indicator\n// }\n\nlet xyDateFormat = {\n  formatDate,\n  relativeDate\n}\n\nlet xyNumber = {\n  numberAfterPoint\n}\n\nlet xyTools = {\n  sleep,\n  browser\n}\n\nlet xyValidate = {\n  isIdCard\n}\n\nexport {\n  xyLazyloadResize,\n  // mintUI,\n  xyDateFormat,\n  xyNumber,\n  xyTools,\n  xyValidate\n}"],"names":["scrolly","position","top","left","width","zindex","boxshadow","height","scrolly2","checkTimer","checkCount","stop","resetCheck","el","window","scrollY","setTimeout","style","zIndex","boxShadow","removeAttribute","nextElementSibling","marginTop","clearInterval","scrollCb","console","warn","name","bind","setAttribute","hasAttribute","getBoundingClientRect","setInterval","log","addEventListener","inserted","offsetHeight","unbind","removeEventListener","timer","btnClickCb","clearTimeout","move","loader","classList","add","remove","document","createElement","logger","bottom","backgroundColor","fontSize","color","minHeight","maxHeight","lineHeight","padding","overflow","e","stopPropagation","innerHTML","pullHeight","pullPoint","eh","sy","my","st","sb","direct","upLock","downLock","stLock","pullRefreshCb","touchstartCb","touchmoveCb","touchendCb","onWinScrollCb","value","arg","cb","call","insertBefore","children","touches","touch","clientY","y","Math","round","heightTemp","preventDefault","changedTouches","cp","Vue","extend","xyPopImage","clicks","Map","pops","instances","count","instance","$el","dataset","id","body","appendChild","$on","direction","data","imgs","idx","indexOf","img","next","length","getAttribute","parent","parentElement","hasA","contains","tagName","visible","index","set","hd","get","delete","preLoad","attempt","adapter","[object Object]","formCache","backgroundImage","src","backgroundSize","min","offsetWidth","formatDate","d","fmt","date","Date","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","floor","S","getMilliseconds","format","k","test","replace","RegExp","$1","String","getFullYear","substr","relativeDate","v","now","time","span","day","hour","minute","this","toString","numberAfterPoint","l","n","Number","str","result","padEnd","includes","isIdCard","card","valid","msg","sleep","ms","Promise","resolve","reject","browser","type","wx","navigator","userAgent","u","isAndroid","isiOS","Boolean","match","xyUI","directive","xyKeepTop","xyMovingBtn","xyHoverBtn","xyPullRefresh","component","xyArticle","xyReachBottom","xyScaleSlider","xyListStatus","xyTimeCount","filter","prototype","$xyFormat","$xyNumber","$xyValidate","$xyTools","use","VueLazyload","xyLazyloadResize","xyDateFormat","xyNumber","xyTools","xyValidate"],"mappings":"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"}